// SmartQue Translations - Bangla (default) and English
const translations = {
    bn: {
        // Header
        appName: "Smart",
        appNameHighlight: "Que",
        tagline: "কুইজের জন্য প্রস্তুত হন এবং বিস্মিত হন!",
        login: "লগইন",

        // Language toggle
        langBn: "বাংলা",
        langEn: "English",

        // Topic Selection
        welcome: "SmartQue এ স্বাগতম!!!",
        selectTopic: "একটি বিষয় নির্বাচন করুন",
        selectTopicDesc: "আপনি কোন বিষয়ে কুইজ দিতে চান তা বেছে নিন",

        // Topics
        html: "এইচটিএমএল",
        htmlDesc: "ওয়েব পেজের গঠন ও মার্কআপ শিখুন",
        css: "সিএসএস",
        cssDesc: "স্টাইলিং এবং ডিজাইন আয়ত্ত করুন",
        javascript: "জাভাস্ক্রিপ্ট",
        jsDesc: "ইন্টারঅ্যাক্টিভ ওয়েব ডেভেলপমেন্ট শিখুন",

        // Levels
        selectLevel: "লেভেল নির্বাচন করুন",
        selectLevelDesc: "আপনার দক্ষতার স্তর বেছে নিন",
        beginner: "সহজ",
        beginnerDesc: "নতুনদের জন্য মৌলিক প্রশ্ন",
        intermediate: "মাঝারি",
        intermediateDesc: "মধ্যম স্তরের চ্যালেঞ্জিং প্রশ্ন",
        advanced: "কঠিন",
        advancedDesc: "বিশেষজ্ঞদের জন্য জটিল প্রশ্ন",
        back: "পেছনে যান",

        // Quiz Rules
        quizRules: "কুইজের নিয়মাবলী",
        rulesNote: "শুরু করার আগে অনুগ্রহ করে সব নিয়ম পড়ুন।",
        step1: "ধাপ ১:",
        step1Text: "নিচের 'কুইজ শুরু করুন' বাটনে ক্লিক করুন।",
        step2: "ধাপ ২:",
        step2Text: "শুরু বাটনে ক্লিক করার পর, আপনি ৩ সেকেন্ড কাউন্টডাউন দেখতে পাবেন, অপেক্ষা করুন!",
        step3: "ধাপ ৩:",
        step3Text: "আপনি প্রতিটি প্রশ্নের জন্য ৪টি অপশন দেখতে পাবেন এবং টাইমার আপনার সময় গণনা করবে।",
        step4: "ধাপ ৪:",
        step4Text: "আপনাকে সব ২০টি প্রশ্নের সঠিক উত্তর দিতে হবে। আপনার কাছে ১,২০০ সেকেন্ড (২০ মিনিট) সময় আছে। সময় শেষ হলে কুইজ স্বয়ংক্রিয়ভাবে জমা হয়ে যাবে।",
        step5: "ধাপ ৫:",
        step5Text: "সব উত্তর দেওয়া হলে কুইজ জমা দিন বাটনে ক্লিক করুন।",
        startQuiz: "কুইজ শুরু করুন",

        // Quiz
        attention: "মনোযোগ!",
        timeWarning: "আপনার কাছে ১,২০০ সেকেন্ড (২০ মিনিট) সময় আছে সব ২০টি প্রশ্নের উত্তর দেওয়ার জন্য। সর্বোচ্চ স্কোর: ২০০ পয়েন্ট।",
        autoSubmitWarning: "সময় শেষ হলে কুইজ স্বয়ংক্রিয়ভাবে জমা হবে। টাইমার শেষ হওয়ার আগে সব প্রশ্নের উত্তর দিন!",
        timeConsumed: "সময় অতিবাহিত",
        option: "অপশন",
        chosenAnswers: "নির্বাচিত উত্তর",
        noAnswers: "কোনো উত্তর নেই",
        readyToSubmit: "সব শেষ! কুইজ জমা দিতে প্রস্তুত?",
        submitQuiz: "কুইজ জমা দিন",

        // Results
        excellent: "চমৎকার!",
        excellentMsg: "অসাধারণ! আপনি পুরোপুরি সফল!",
        veryGood: "খুব ভালো!",
        veryGoodMsg: "আপনি প্রায় পারফেক্ট!",
        niceTry: "ভালো চেষ্টা!",
        niceTryMsg: "আরেকটু প্র্যাকটিস করলে উন্নতি হবে!",
        keepTrying: "চেষ্টা চালিয়ে যান!",
        keepTryingMsg: "হার মানবেন না! আবার চেষ্টা করুন!",
        average: "মোটামুটি",
        poor: "দুর্বল",
        good: "ভালো",
        totalTime: "মোট সময়:",
        restart: "আবার শুরু করুন",
        previousSubmissions: "পূর্ববর্তী ফলাফল",
        clearHistory: "ইতিহাস মুছুন",
        marks: "নম্বর",
        grade: "গ্রেড",
        time: "সময়",
        givenAnswer: "আপনার উত্তর:",
        correctAnswer: "সঠিক উত্তর:",
        description: "ব্যাখ্যা:",

        // Countdown
        staySeated: "বসে থাকুন, প্রস্তুত থাকুন। কুইজ শুরু হচ্ছে!",

        // Footer
        copyright: "কপিরাইট © ফারহান শাহরিয়ার ২০২৪ সর্বস্বত্ব সংরক্ষিত।",

        // Loading
        loading: "অপেক্ষা করুন, প্রশ্ন তৈরি হচ্ছে...",
        generatingQuestions: "AI প্রশ্ন তৈরি করছে...",
        estimatedTime: "আনুমানিক সময়: ৩০-৫০ সেকেন্ড",

        // Errors
        apiError: "প্রশ্ন লোড করতে সমস্যা হয়েছে। আবার চেষ্টা করুন।",
        answerAllQuestions: "অনুগ্রহ করে জমা দেওয়ার আগে সব ২০টি প্রশ্নের উত্তর দিন।",
        answeredCount: "আপনি উত্তর দিয়েছেন",
        of: "টির মধ্যে",
        timesUp: "সময় শেষ! আপনার কুইজ স্বয়ংক্রিয়ভাবে জমা হচ্ছে।",

        // Give Up Modal
        incompleteQuiz: "অসম্পূর্ণ কুইজ!",
        giveUpWarning: "আপনি যদি এখন জমা দেন, শুধুমাত্র আপনার দেওয়া উত্তরগুলোই মূল্যায়ন করা হবে।",
        continueQuiz: "কুইজে ফিরে যান",
        giveUp: "হাল ছেড়ে দিন",
        answeredXofY: "আপনি ২০টি প্রশ্নের মধ্যে {count}টি উত্তর দিয়েছেন।"
    },

    en: {
        // Header
        appName: "Quiz",
        appNameHighlight: "HERO",
        tagline: "Get ready for Quiz and be amazed!",
        login: "Login",

        // Language toggle
        langBn: "বাংলা",
        langEn: "English",

        // Topic Selection
        welcome: "Welcome to SmartQue!!!",
        selectTopic: "Select a Topic",
        selectTopicDesc: "Choose which subject you want to take a quiz on",

        // Topics
        html: "HTML",
        htmlDesc: "Learn web page structure and markup",
        css: "CSS",
        cssDesc: "Master styling and design",
        javascript: "JavaScript",
        jsDesc: "Learn interactive web development",

        // Levels
        selectLevel: "Select Level",
        selectLevelDesc: "Choose your skill level",
        beginner: "Beginner",
        beginnerDesc: "Basic questions for newcomers",
        intermediate: "Intermediate",
        intermediateDesc: "Challenging questions for learners",
        advanced: "Advanced",
        advancedDesc: "Complex questions for experts",
        back: "Go Back",

        // Quiz Rules
        quizRules: "Quiz Rules",
        rulesNote: "Please read all the rules before starting.",
        step1: "Step 1:",
        step1Text: "Click on the 'Start Quiz' button below.",
        step2: "Step 2:",
        step2Text: "After clicking Start, you will see a 3s countdown, wait until it's over!",
        step3: "Step 3:",
        step3Text: "You will see 4 options for each question, and the timer will count your exam time.",
        step4: "Step 4:",
        step4Text: "You have to answer all 20 questions correctly. You have 1,200 seconds (20 minutes). Quiz auto-submits when time expires.",
        step5: "Step 5:",
        step5Text: "Click on the submit quiz button when you are done with all answers.",
        startQuiz: "Start Quiz",

        // Quiz
        attention: "Attention!",
        timeWarning: "You have 1,200 seconds (20 minutes) to answer all 20 questions. Max score: 200 points.",
        autoSubmitWarning: "Quiz will auto-submit when time runs out. Answer all questions before the timer expires!",
        timeConsumed: "Time Consumed",
        option: "Option",
        chosenAnswers: "Chosen Answers",
        noAnswers: "No Answers",
        readyToSubmit: "All Done! Ready to submit your quiz?",
        submitQuiz: "Submit Quiz",

        // Results
        excellent: "Excellent!",
        excellentMsg: "Outstanding! You aced it!",
        veryGood: "Very Good!",
        veryGoodMsg: "You're almost perfect!",
        niceTry: "Nice Try!",
        niceTryMsg: "A bit more practice and you'll improve!",
        keepTrying: "Keep Trying!",
        keepTryingMsg: "Don't give up! Try again!",
        average: "Average",
        poor: "Poor",
        good: "Good",
        totalTime: "Total Time:",
        restart: "Restart",
        previousSubmissions: "Previous Submissions",
        clearHistory: "Clear History",
        marks: "Marks",
        grade: "Grade",
        time: "Time",
        givenAnswer: "Given Answer:",
        correctAnswer: "Correct Answer:",
        description: "Description:",

        // Countdown
        staySeated: "Stay Seated, Stay Sharp. Starting Quiz In a moment!",

        // Footer
        copyright: "Copyright © Farhan Shahriyar 2024 Rights Reserved.",

        // Loading
        loading: "Please wait, generating questions...",
        generatingQuestions: "AI is creating your quiz...",
        estimatedTime: "Estimated time: 30-50 seconds",

        // Errors
        apiError: "Failed to load questions. Please try again.",
        answerAllQuestions: "Please answer all 20 questions before submitting.",
        answeredCount: "You have answered",
        of: "of",
        timesUp: "Time's up! Your quiz is being submitted automatically.",

        // Give Up Modal
        incompleteQuiz: "Incomplete Quiz!",
        giveUpWarning: "If you submit now, only your given answers will be graded.",
        continueQuiz: "Continue Quiz",
        giveUp: "Give Up",
        answeredXofY: "You have answered {count} out of 20 questions."
    }
};

// Current language state (default: Bangla)
let currentLang = 'bn';

// Get translation
function t(key) {
    return translations[currentLang][key] || translations['en'][key] || key;
}

// Switch language
function switchLanguage(lang) {
    currentLang = lang;
    localStorage.setItem('smartque_lang', lang);
    updatePageLanguage();
}

// Update all translatable elements on the page
function updatePageLanguage() {
    document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        el.textContent = t(key);
    });

    document.querySelectorAll('[data-i18n-html]').forEach(el => {
        const key = el.getAttribute('data-i18n-html');
        el.innerHTML = t(key);
    });

    // Update language toggle button states
    const bnBtn = document.getElementById('lang-bn');
    const enBtn = document.getElementById('lang-en');
    if (bnBtn && enBtn) {
        if (currentLang === 'bn') {
            bnBtn.classList.add('bg-green-600', 'text-white');
            bnBtn.classList.remove('bg-gray-200', 'text-gray-700');
            enBtn.classList.remove('bg-green-600', 'text-white');
            enBtn.classList.add('bg-gray-200', 'text-gray-700');
        } else {
            enBtn.classList.add('bg-green-600', 'text-white');
            enBtn.classList.remove('bg-gray-200', 'text-gray-700');
            bnBtn.classList.remove('bg-green-600', 'text-white');
            bnBtn.classList.add('bg-gray-200', 'text-gray-700');
        }
    }
}

// Initialize language from localStorage
function initLanguage() {
    const savedLang = localStorage.getItem('smartque_lang');
    if (savedLang) {
        currentLang = savedLang;
    }
    updatePageLanguage();
}
